<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <title>活动</title>
    <link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.3/style/weui.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.1/css/jquery-weui.min.css">
    <style>
        body {
            padding: 5px;
        }

        .placeholder {
            margin: 5px;
            padding: 0 10px;
            background-color: white;
            /* height: 2.3em; */
            line-height: 2.3em;
            /* color: #cfcfcf; */
        }

        .avatar {
            width: 44px;
            height: 44px;
            /* border-radius: 50%; */
            /* margin: 15px auto; */
            /* cursor: pointer; */
        }
    </style>
</head>

<body ontouchstart>
    <div id="app" :style="`background:url(${activity.goodsImage})`">
        <img :src="activity.goodsImage" width="100%" />
        <div class="weui-flex">
            <div class="weui-flex__item">
                <div class="placeholder" style="text-align: center;">
                    <h4>距离活动结束:</h4>
                    <div id="timer" style="font-size:20px">0天0小时0分0秒</div>
                </div>
            </div>
        </div>
        <div class="weui-flex">
            <div class="weui-flex__item">
                <div class="placeholder">参与人数({{activity.scanNumber}}人)</div>
            </div>
        </div>
        <div class="weui-flex">
            <div class="weui-flex__item">
                <div class="placeholder">报名记录({{activity.joinNumber}}人)
                    <div class="weui-cells">
                        <div v-for="order in activity.order_list" class="weui-cell">
                            <div class="weui-cell__hd">
                                <img :src=order.avatar class="avatar">
                            </div>
                            <div class="weui-cell__bd">
                                {{order.userName}}<br>{{order.phone}}
                            </div>
                            <div class="weui-cell__ft">
                                <div v-if="order.status === 3">已核销</div>
                                <div v-if="order.status === 2" style="color:green">已支付</div>
                                <div v-if="order.status === 1" style="color:rebeccapurple">待支付</div>
                                <!-- <br> {{order.createTime}} -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="weui-flex">
            <div class="weui-flex__item">
                <div class="placeholder" style="text-align: center;">活动佣金排行榜</div>
            </div>
        </div>
        <img :src="activity.goodsDetail" width="100%" />
        <div class="weui-footer" style="overflow:hidden; position: fixed;bottom: 0;width: 100%;">
            <a href="javascript:;" class="open-popup" data-target="#formAdd">点击购买</a>
        </div>

        <div id="formAdd" class="weui-popup__container popup-bottom">
            <div class="weui-popup__overlay"></div>
            <div class="weui-popup__modal">
                <div class="weui-cells weui-cells_form">
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">姓名</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input" type="text" name="userName" placeholder="请输入姓名">
                        </div>
                    </div>
                    <div class="weui-cell">
                        <div class="weui-cell__hd"><label class="weui-label">手机号</label></div>
                        <div class="weui-cell__bd">
                            <input class="weui-input" type="text" name="userName" placeholder="请输入手机号">
                        </div>
                    </div>
                    <a href="javascript:;" class="weui-btn weui-btn_primary">确认提交</a>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
<script>
    window.onload = function () {
        var vm = new Vue({
            el: '#app',
            data: {
                activity: {
                    scanNumber: 1230,
                    joinNumber: 981,
                    goodsImage: 'http://ppqnam2qx.bkt.clouddn.com/FgsGqGxKQPlX_skThoGIN4pfBo57',
                    goodsDetail: 'http://ppqnam2qx.bkt.clouddn.com/FgsGqGxKQPlX_skThoGIN4pfBo57',
                    activityMusic: 'http://ppqnam2qx.bkt.clouddn.com/FgsGqGxKQPlX_skThoGIN4pfBo57',
                    endTime: "2019-05-01",
                    join_user: [
                        { name: '张欢', avatar: 'http://ppqnam2qx.bkt.clouddn.com/FvG41YMFLOr5OffW_h8IepTFk173' },
                        { name: '李四', avatar: 'http://ppqnam2qx.bkt.clouddn.com/FvG41YMFLOr5OffW_h8IepTFk173' },
                        { name: 'Runoob1', avatar: 'http://ppqnam2qx.bkt.clouddn.com/FvG41YMFLOr5OffW_h8IepTFk173' }
                    ],
                    order_list: [
                        { userName: '张欢', phone: '13524002701', createTime: '2019-05-01 10:00:00', status: 1, avatar: 'http://ppqnam2qx.bkt.clouddn.com/FvG41YMFLOr5OffW_h8IepTFk173' },
                        { userName: '张欢', phone: '13524002701', createTime: '2019-05-01 10:00:00', status: 2, avatar: 'http://ppqnam2qx.bkt.clouddn.com/FvG41YMFLOr5OffW_h8IepTFk173' },
                        { userName: '张欢', phone: '13524002701', createTime: '2019-05-01 10:00:00', status: 3, avatar: 'http://ppqnam2qx.bkt.clouddn.com/FvG41YMFLOr5OffW_h8IepTFk173' },
                    ],
                    reward_list: [
                        { userName: '张欢', childNum: 1, rewardAmount: 40 },
                        { userName: '张欢', childNum: 2, rewardAmount: 80 },
                        { userName: '张欢', childNum: 4, rewardAmount: 160 },
                    ]
                }

            },
            created() {
                var endDate = this.activity.endTime.split("-");
                setInterval("Timer(" + endDate[0] + "," + endDate[1] + "," + endDate[2] + ",00,00,00)", 1000);
                this.getActivity("2");
            },
            methods: {
                getActivity: function (data) {
                    // //发送get请求
                    // this.$http.get('/h5/activity/'+data).then(function (res) {
                    //     console.log(res.body);
                    //     this.activity = res.body;
                    // }, function () {
                    //     console.log('请求失败处理');
                    // });
                }
            }

        });



    }

    function Timer(year, month, day, hour, minute, second) {

        var leftTime = (new Date(year, month - 1, day, hour, minute, second)) - (new Date()); //计算剩余的毫秒数 
        var days = parseInt(leftTime / 1000 / 60 / 60 / 24, 10); //计算剩余的天数 
        var hours = parseInt(leftTime / 1000 / 60 / 60 % 24, 10); //计算剩余的小时 
        var minutes = parseInt(leftTime / 1000 / 60 % 60, 10);//计算剩余的分钟 
        var seconds = parseInt(leftTime / 1000 % 60, 10);//计算剩余的秒数 
        days = checkTime(days);
        hours = checkTime(hours);
        minutes = checkTime(minutes);
        seconds = checkTime(seconds);

        if (isNaN(days)) { }
        else {
            document.getElementById("timer").innerHTML = '<span style="color:firebrick">' + days + '</span> ' + "天 " + '<span style="color:firebrick">' + hours + '</span> ' + "小时 " + '<span style="color:firebrick">' + minutes + '</span> ' + "分 " + '<span style="color:firebrick">' + seconds + '</span> ' + "秒";
        }

    }
    function checkTime(i) { //将0-9的数字前面加上0，例1变为01 
        if (i < 10) {
            i = "0" + i;
        }
        return i;
    }
</script>
<script src="https://cdn.bootcss.com/jquery/1.11.0/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/jquery-weui.min.js"></script>

<!-- 如果使用了某些拓展插件还需要额外的JS -->
<script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/swiper.min.js"></script>

</html>